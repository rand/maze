direction: right

# Simple 5-stage pipeline
indexer: {
  label: Context Indexer
  shape: rectangle
}

synthesis: {
  label: Constraint Synthesis
  shape: rectangle
}

orchestrator: {
  label: Decode Orchestrator
  shape: rectangle
}

validation: {
  label: Post-Validation
  shape: rectangle
}

repair: {
  label: Repair Loop
  shape: rectangle
}

# Flow
indexer -> synthesis: Type context
synthesis -> orchestrator: Constraints
orchestrator -> validation: Generated code
validation -> repair: Diagnostics {
  style.stroke-dash: 3
}
repair -> synthesis: Refined constraints {
  style.stroke-dash: 3
}
validation -> output: Valid code

output: {
  label: Output
  shape: oval
  style.fill: "#f0f0f0"
}
